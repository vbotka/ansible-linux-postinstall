Tasks
=====

.. _as_main.yml:

main.yml
--------

Synopsis: Main task.


Import tasks if enabled.


[`tasks/main.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/main.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/main.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_acpi.yml:

acpi.yml
--------

Synopsis: Configure acpi.


Description of the task.


[`tasks/acpi.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/acpi.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/acpi.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_aliases.yml:

aliases.yml
-----------

Synopsis: Configure aliases.


Description of the task.


[`tasks/aliases.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/aliases.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/aliases.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:

.. seealso::
   * Handler :ref:`as_handler_newaliases.yml`
   * Template :ref:`as_template_aliases.j2`




.. _as_apt.yml:

apt.yml
-------

Synopsis: Configure apt.


Description of the task.


[`tasks/apt.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/apt.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/apt.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:

.. seealso::
   * Template :ref:`as_template_apt_confd.j2`




.. _as_apparmor.yml:

apparmor.yml
------------

Synopsis: Configure apparmor.


Description of the task.


[`tasks/apparmor.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/apparmor.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/apparmor.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_authorized_keys.yml:

authorized_keys.yml
-------------------

Synopsis: Configure authorized_keys.


Description of the task.


[`tasks/authorized_keys.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/authorized_keys.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/authorized_keys.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_autofs.yml:

autofs.yml
----------

Synopsis: Configure autofs.


Description of the task.


[`tasks/autofs.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/autofs.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/autofs.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:

.. seealso::
   * Handler :ref:`as_handler_autofs.yml`




.. _as_auto_upgrades.yml:

auto_upgrades.yml
-----------------

Synopsis: Configure auto_upgrades.


Description of the task.


[`tasks/auto_upgrades.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/auto_upgrades.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/auto_upgrades.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_bluetooth.yml:

bluetooth.yml
-------------

Synopsis: Configure bluetooth.


Description of the task.


[`tasks/bluetooth.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/bluetooth.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/bluetooth.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:

.. seealso::
   * Handler :ref:`as_handler_bluetooth.yml`




.. _as_chrony.yml:

chrony.yml
----------

Synopsis: Configure chrony.


Description of the task.


[`tasks/chrony.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/chrony.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/chrony.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_cron.yml:

cron.yml
--------

Synopsis: Configure cron.


Description of the task.


[`tasks/cron.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/cron.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/cron.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_debsums.yml:

debsums.yml
-----------

Synopsis: Configure debsums.


Description of the task.


[`tasks/debsums.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/debsums.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/debsums.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_debug.yml:

debug.yml
---------

Synopsis: Configure debug.


Description of the task.


[`tasks/debug.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/debug.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/debug.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_dnsmasq.yml:

dnsmasq.yml
-----------

Synopsis: Configure dnsmasq.


Description of the task.


[`tasks/dnsmasq.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/dnsmasq.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/dnsmasq.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_fstab.yml:

fstab.yml
---------

Synopsis: Configure fstab.


Description of the task.


[`tasks/fstab.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/fstab.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/fstab.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_gpg.yml:

gpg.yml
-------

Synopsis: Configure gpg.


Description of the task.


[`tasks/gpg.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/gpg.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/gpg.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:

.. seealso::
   * Handler :ref:`as_handler_gpg.yml`
   * Template :ref:`as_template_gpg.conf.j2`
   * Template :ref:`as_template_gpg_agent.conf.j2`
   * Template :ref:`as_template_gpg_dirmngr.conf.j2`




.. _as_gpsd.yml:

gpsd.yml
--------

Synopsis: Configure gpsd.


Description of the task.


[`tasks/gpsd.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/gpsd.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/gpsd.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:

.. seealso::
   * Handler :ref:`as_handler_gpsd.yml`
   * Handler :ref:`as_handler_bluetooth.yml`
   * Template :ref:`as_template_gpsd.j2`




.. _as_grub.yml:

grub.yml
--------

Synopsis: Configure grub.


Description of the task.


[`tasks/grub.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/grub.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/grub.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:

.. seealso::
   * Handler :ref:`as_handler_grub.yml`




.. _as_hostname.yml:

hostname.yml
------------

Synopsis: Configure hostname.


Description of the task.


[`tasks/hostname.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/hostname.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/hostname.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_hosts.yml:

hosts.yml
---------

Synopsis: Configure hosts.


Description of the task.


[`tasks/hosts.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/hosts.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/hosts.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:

.. seealso::
   * Template :ref:`as_template_hosts.j2`




.. _as_iptables.yml:

iptables.yml
------------

Synopsis: Configure iptables.


Description of the task.


[`tasks/iptables.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/iptables.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/iptables.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:

.. seealso::
   * Handler :ref:`as_handler_iptables.yml`
   * Template :ref:`as_template_iptables_restore.j2`
   * Template :ref:`as_template_default_iptables.j2`
   * Template :ref:`as_template_router1_iptables.j2`




.. _as_kvm.yml:

kvm.yml
-------

Synopsis: Configure kvm.


Description of the task.


[`tasks/kvm.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/kvm.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/kvm.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_latex.yml:

latex.yml
---------

Synopsis: Configure latex.


Description of the task.


[`tasks/latex.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/latex.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/latex.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_libvirt.yml:

libvirt.yml
-----------

Synopsis: Configure libvirt.


Description of the task.


[`tasks/libvirt.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/libvirt.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/libvirt.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_lid.yml:

lid.yml
-------

Synopsis: Configure lid.


Description of the task.


[`tasks/lid.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/lid.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/lid.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:

.. seealso::
   * Handler :ref:`as_handler_messages.yml`




.. _as_logrotate.yml:

logrotate.yml
-------------

Synopsis: Configure logrotate.


Description of the task.


[`tasks/logrotate.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/logrotate.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/logrotate.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_modemmanager.yml:

modemmanager.yml
----------------

Synopsis: Configure modemmanager.


Description of the task.


[`tasks/modemmanager.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/modemmanager.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/modemmanager.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_modules.yml:

modules.yml
-----------

Synopsis: Configure modules.


Description of the task.


[`tasks/modules.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/modules.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/modules.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_netplan.yml:

netplan.yml
-----------

Synopsis: Configure netplan.


Description of the task.


[`tasks/netplan.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/netplan.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/netplan.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:

.. seealso::
   * Handler :ref:`as_handler_netplan.yml`
   * Template :ref:`as_template_netplan_default.j2`
   * Template :ref:`as_template_netplan_conf.j2`




.. _as_networkd.yml:

networkd.yml
------------

Synopsis: Configure networkd.


Description of the task.


[`tasks/networkd.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/networkd.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/networkd.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_networkmanager.yml:

networkmanager.yml
------------------

Synopsis: Configure networkmanager.


Description of the task.


[`tasks/networkmanager.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/networkmanager.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/networkmanager.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_nfsd.yml:

nfsd.yml
--------

Synopsis: Configure nfsd.


Description of the task.


[`tasks/nfsd.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/nfsd.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/nfsd.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_packages_auto.yml:

packages_auto.yml
-----------------

Synopsis: Configure packages_auto.


Description of the task.


[`tasks/packages_auto.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/packages_auto.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/packages_auto.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_packages.yml:

packages.yml
------------

Synopsis: Configure packages.


Description of the task.


[`tasks/packages.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/packages.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/packages.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_passwords.yml:

passwords.yml
-------------

Synopsis: Configure passwords.


Description of the task.


[`tasks/passwords.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/passwords.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/passwords.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_pm_utils.yml:

pm_utils.yml
------------

Synopsis: Configure pm_utils.


Description of the task.


[`tasks/pm_utils.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/pm_utils.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/pm_utils.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_postfix.yml:

postfix.yml
-----------

Synopsis: Configure postfix.


Description of the task.


[`tasks/postfix.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/postfix.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/postfix.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_rc_local.yml:

rc_local.yml
------------

Synopsis: Configure rc_local.


Description of the task.


[`tasks/rc_local.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/rc_local.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/rc_local.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_reboot.yml:

reboot.yml
----------

Synopsis: Configure reboot.


Description of the task.


[`tasks/reboot.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/reboot.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/reboot.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_repos.yml:

repos.yml
---------

Synopsis: Configure repos.


Description of the task.


[`tasks/repos.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/repos.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/repos.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_resolvconf.yml:

resolvconf.yml
--------------

Synopsis: Configure resolvconf.


Description of the task.


[`tasks/resolvconf.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/resolvconf.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/resolvconf.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_service.yml:

service.yml
-----------

Synopsis: Configure services.


Set my_service_name_vars (8)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^
The task will iterate the list ``lp_service_enable`` (12) and
look for variables ``lp_<item>`` (13). If the variable exists and
is ``True`` *(default='false')* an item will be added to the
list ``my_service_name_vars`` (10). The item is a *{key: value}*
hash where the *key* is the name of the service in this role and
the *value* is the OS specific name of the service stored in the
variable ``lp_<item>_service`` (11). The best practice is to
configure variables ``lp_<item>_service`` in files placed in the
directory ``vars/defaults``.

Set my_service_enable_vars (16)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
The next task will iterate the same list ``lp_service_enable``
(20) and condition (21). The created list
``my_service_enable_vars`` (18) will keep the *{key: value}* hashes
with the *value* of the variable ``lp_<item>_enable`` (19).

Get service_facts and create dict my_services (24)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Run module ``service_facts`` (27) and combine dictionary
``my_services`` (31). This dictionary will be used to test a
service is available when ``lp_service_sanity`` is enabled
*(default: True)*.

Debug (43)
^^^^^^^^^^
To see what services (49,51,53,55,57) will be managed run the
playbook with options ``-t lp_service_debug -e
"lp_service_debug=True"``.

Debug sanity lp_service_enable (63)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
To see what services (66,68) will be tested when
``lp_service_sanity`` is enabled (70) run playbook with options
``-t lp_service_debug,lp_service_sanity -e
"lp_service_debug=True"``.

Sanity lp_service_enable (74)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
If ``lp_service_sanity`` is enabled (79) test if all services in
the list ``my_service_name_vars`` are available in the list of
installed services ``my_services`` (82). Fail (80) when there
are undefined services.

Manage services listed in lp_service_enable (89)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
To configure the services listed in the variable
*lp_service_enable* run the playbook with the tag ``-t
lp_service_auto`` (95).

Manage services listed in lp_service (97)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
To configure the services listed in the variable *lp_service*
run the playbook with the tag ``-t lp_service_general`` (110).


[`tasks/service.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/service.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/service.yml
    :language: Yaml
    :emphasize-lines: 8,10-13,16,18,19,21,24,27,31,43,49,51,53,55,57,63,66,68,74,79,80,82,89,95,97,110
    :linenos:





.. _as_smart.yml:

smart.yml
---------

Synopsis: Configure smart.


Description of the task.


[`tasks/smart.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/smart.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/smart.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_snap.yml:

snap.yml
--------

Synopsis: Configure snap.


Description of the task.


[`tasks/snap.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/snap.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/snap.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_speechd.yml:

speechd.yml
-----------

Synopsis: Configure speechd.


Description of the task.


[`tasks/speechd.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/speechd.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/speechd.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_sshd.yml:

sshd.yml
--------

Synopsis: Configure sshd.


Description of the task.


[`tasks/sshd.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/sshd.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/sshd.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_ssh.yml:

ssh.yml
-------

Synopsis: Configure ssh.


Description of the task.


[`tasks/ssh.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/ssh.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/ssh.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_sudoers.yml:

sudoers.yml
-----------

Synopsis: Configure sudoers.


Description of the task.


[`tasks/sudoers.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/sudoers.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/sudoers.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_swap.yml:

swap.yml
--------

Synopsis: Configure swap.


Description of the task.


[`tasks/swap.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/swap.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/swap.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_sysctl.yml:

sysctl.yml
----------

Synopsis: Configure sysctl.


Description of the task.


[`tasks/sysctl.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/sysctl.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/sysctl.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_systemd.yml:

systemd.yml
-----------

Synopsis: Configure systemd.


Set my_services (10)
^^^^^^^^^^^^^^^^^^^^
Iterate ``lp_systemd_unit`` (15) and create dictionary
``my_services``. It will be used by handlers to decide if and
how to reload or restart services

.. code-block:: yaml

   my_services:
     <name>.<type|default(lp_systemd_unit_type)>:
       state: <control.state|default('started')>
       restart_or_reload: <control.restart_or_reload|default('reload')>
   ...

Debug (25)
^^^^^^^^^^
To see the values of the variables run the playbook with
options ``-t lp_systemd_debug -e "lp_systemd_debug=True"`` (46).

Packages (50)
^^^^^^^^^^^^^
Install packages when enabled (53).

Configure systemd (57)
^^^^^^^^^^^^^^^^^^^^^^

Use ``ini_file`` (58) to configure files (59) in loop
``with_subelements`` (69-71). Register
``lp_systemd_conf_changes`` (68) and notify handler ``reload
systemd conf`` (74).

.. code-block:: yaml

   lp_systemd_conf:
     <path>:
       owner: <owner|default(lp_systemd_owner)>
       group: <group|default(lp_systemd_group)>
       mode: <mode|default(lp_systemd_mode)>
       reload_service: <service to be reloaded or restarted by handler>
       conf:
         - {section: <section>, key: <option>, val: <value>}
     ...

Create units (99)
^^^^^^^^^^^^^^^^^^

Use ``template`` (100) to create units in the loop (108) when
``state == 'create'`` (112. Register
``lp_systemd_unit_create_changes`` (107) and notify handler
``reload systemd units`` (111).

.. code-block:: yaml

   lp_systemd_unit:
     - name: <name of the service>
       type: <type of the service|default(lp_systemd_unit_type)>
       path: <directory of the units|default(lp_systemd_unit_dir)>
       owner: <owner|default(lp_systemd_owner)>
       group: <group|default(lp_systemd_group)>
       mode: <mode|default(lp_systemd_mode)>
       state: <'create' or 'absent'|default('noop')>
     ...

Remove units (121)
^^^^^^^^^^^^^^^^^^

<TBD>

Control units (138)
^^^^^^^^^^^^^^^^^^^

.. code-block:: yaml

   lp_systemd_unit:
     - name: <name of the service>
       type: <type of the service|default(lp_systemd_unit_type)>
       control:
         daemon_reexec: <daemon_reexec|default(omit)>
         daemon_reload: <daemon_reload|default(omit)>
         enabled: <enabled|default(systemd_units_enabled)>
         force: <force|default(omit)>
         masked: <masked|default(omit)>
         no_block: <no_block|default(omit)>
         scope: <scope|default(omit)>
         state: <state|default(omit)>


.. seealso::

   * Description of Parameters `Ansible module systemd
     <https://docs.ansible.com/ansible/latest/modules/systemd_module.html#systemd-manage-services>`_

<TBD>


[`tasks/systemd.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/systemd.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/systemd.yml
    :language: Yaml
    :emphasize-lines: 1,2,10,15,25,46,50,53,57-59,68-71,74,99-100,107-108,111,112,121,138
    :linenos:





.. _as_timesyncd.yml:

timesyncd.yml
-------------

Synopsis: Configure timesyncd.


Description of the task.


[`tasks/timesyncd.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/timesyncd.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/timesyncd.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_timezone.yml:

timezone.yml
------------

Synopsis: Configure timezone.


Description of the task.


[`tasks/timezone.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/timezone.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/timezone.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_tlp.yml:

tlp.yml
-------

Synopsis: Configure tlp.


Description of the task.


[`tasks/tlp.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/tlp.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/tlp.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_udev.yml:

udev.yml
--------

Synopsis: Configure udev.


Description of the task.


[`tasks/udev.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/udev.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/udev.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_ufw.yml:

ufw.yml
-------

Synopsis: Configure ufw.


Description of the task.


[`tasks/ufw.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/ufw.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/ufw.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_users.yml:

users.yml
---------

Synopsis: Configure users.


Description of the task.


[`tasks/users.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/users.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/users.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_vars_firstfound.yml:

vars_firstfound.yml
-------------------

Synopsis: Configure vars_firstfound.


Description of the task.


[`tasks/vars_firstfound.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/vars_firstfound.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/vars_firstfound.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_vars_incremental.yml:

vars_incremental.yml
--------------------

Synopsis: Configure vars_incremental.


Description of the task.


[`tasks/vars_incremental.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/vars_incremental.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/vars_incremental.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_vars.yml:

vars.yml
--------

Synopsis: Configure vars.


Description of the task.


[`tasks/vars.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/vars.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/vars.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_virtualbox.yml:

virtualbox.yml
--------------

Synopsis: Configure virtualbox.


Description of the task.


[`tasks/virtualbox.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/virtualbox.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/virtualbox.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_wpagui.yml:

wpagui.yml
----------

Synopsis: Configure wpagui.


Description of the task.


[`tasks/wpagui.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/wpagui.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/wpagui.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_wpasupplicant.yml:

wpasupplicant.yml
-----------------

Synopsis: Configure wpasupplicant.


Description of the task.


[`tasks/wpasupplicant.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/wpasupplicant.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/wpasupplicant.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_xen.yml:

xen.yml
-------

Synopsis: Configure xen.


Description of the task.


[`tasks/xen.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/xen.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/xen.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_xorg.yml:

xorg.yml
--------

Synopsis: Configure xorg.


Description of the task.


[`tasks/xorg.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/xorg.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/xorg.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_zeitgeist.yml:

zeitgeist.yml
-------------

Synopsis: Configure zeitgeist.


Description of the task.


[`tasks/zeitgeist.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/zeitgeist.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/zeitgeist.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_zfs.yml:

zfs.yml
-------

Synopsis: Configure zfs.


Description of the task.


[`tasks/zfs.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/zfs.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/zfs.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_vars_flavors.yml:

vars_flavors.yml
----------------

Synopsis: Configure vars_flavors.


Description of the task.


[`tasks/sub/vars_flavors.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/sub/vars_flavors.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/sub/vars_flavors.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_vars_flavors_common.yml:

vars_flavors_common.yml
-----------------------

Synopsis: Configure vars_flavors_common.


Description of the task.


[`tasks/sub/vars_flavors_common.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/sub/vars_flavors_common.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/sub/vars_flavors_common.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





