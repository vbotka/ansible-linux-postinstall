.. _as_tasks:

Tasks
=====

.. _as_main.yml:

main.yml
--------

Synopsis: Main task.


Import tasks if enabled.


[`tasks/main.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/main.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/main.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_acpi.yml:

acpi.yml
--------

Synopsis: Configure acpi.


Description of the task.


[`tasks/acpi.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/acpi.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/acpi.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_aliases.yml:

aliases.yml
-----------

Synopsis: Configure aliases.


Description of the task.


[`tasks/aliases.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/aliases.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/aliases.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:

.. seealso::
   * Handler :ref:`as_handler_newaliases.yml`
   * Template :ref:`as_template_aliases.j2`




.. _as_apt.yml:

apt.yml
-------

Synopsis: Configure apt.


Description of the task.


[`tasks/apt.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/apt.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/apt.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:

.. seealso::
   * Template :ref:`as_template_apt_confd.j2`




.. _as_apparmor.yml:

apparmor.yml
------------

Synopsis: Configure apparmor.


Description of the task.


[`tasks/apparmor.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/apparmor.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/apparmor.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_authorized_keys.yml:

authorized_keys.yml
-------------------

Synopsis: Configure authorized_keys.


Description of the task.


[`tasks/authorized_keys.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/authorized_keys.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/authorized_keys.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_autofs.yml:

autofs.yml
----------

Synopsis: Configure autofs.


Description of the task.


[`tasks/autofs.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/autofs.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/autofs.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:

.. seealso::
   * Handler :ref:`as_handler_autofs.yml`




.. _as_auto_upgrades.yml:

auto_upgrades.yml
-----------------

Synopsis: Configure auto_upgrades.


Description of the task.


[`tasks/auto_upgrades.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/auto_upgrades.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/auto_upgrades.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_bluetooth.yml:

bluetooth.yml
-------------

Synopsis: Configure bluetooth.


Description of the task.


[`tasks/bluetooth.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/bluetooth.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/bluetooth.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:

.. seealso::
   * Handler :ref:`as_handler_bluetooth.yml`




.. _as_chrony.yml:

chrony.yml
----------

Synopsis: Configure chrony.


Description of the task.


[`tasks/chrony.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/chrony.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/chrony.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_cron.yml:

cron.yml
--------

Synopsis: Configure cron.


Description of the task.


[`tasks/cron.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/cron.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/cron.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_debsums.yml:

debsums.yml
-----------

Synopsis: Configure debsums.


Description of the task.


[`tasks/debsums.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/debsums.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/debsums.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_debug.yml:

debug.yml
---------

Synopsis: Configure debug.


Description of the task.


[`tasks/debug.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/debug.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/debug.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_dnsmasq.yml:

dnsmasq.yml
-----------

Synopsis: Configure dnsmasq.


Description of the task.


[`tasks/dnsmasq.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/dnsmasq.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/dnsmasq.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_fstab.yml:

fstab.yml
---------

Synopsis: Configure fstab.


Description of the task.


[`tasks/fstab.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/fstab.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/fstab.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_gpg.yml:

gpg.yml
-------

Synopsis: Configure gpg.


Description of the task.


[`tasks/gpg.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/gpg.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/gpg.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:

.. seealso::
   * Handler :ref:`as_handler_gpg.yml`
   * Template :ref:`as_template_gpg.conf.j2`




.. _as_gpsd.yml:

gpsd.yml
--------

Synopsis: Configure gpsd.


Description of the task.


[`tasks/gpsd.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/gpsd.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/gpsd.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:

.. seealso::
   * Handler :ref:`as_handler_gpsd.yml`
   * Handler :ref:`as_handler_bluetooth.yml`
   * Template :ref:`as_template_gpsd.j2`




.. _as_groups.yml:

groups.yml
----------

Synopsis: Configure groups.


Description of the task.


[`tasks/groups.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/groups.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/groups.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_grub.yml:

grub.yml
--------

Synopsis: Configure grub.


Description of the task.


[`tasks/grub.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/grub.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/grub.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:

.. seealso::
   * Handler :ref:`as_handler_grub.yml`




.. _as_hostname.yml:

hostname.yml
------------

Synopsis: Configure hostname.


Description of the task.


[`tasks/hostname.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/hostname.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/hostname.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_hosts.yml:

hosts.yml
---------

Synopsis: Configure hosts.


Description of the task.


[`tasks/hosts.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/hosts.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/hosts.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:

.. seealso::
   * Template :ref:`as_template_hosts.j2`




.. _as_iptables.yml:

iptables.yml
------------

Synopsis: Configure iptables.


Description of the task.


[`tasks/iptables.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/iptables.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/iptables.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:

.. seealso::
   * Handler :ref:`as_handler_iptables.yml`
   * Template :ref:`as_template_iptables_restore.j2`
   * Template :ref:`as_template_default_iptables.j2`
   * Template :ref:`as_template_router1_iptables.j2`




.. _as_kvm.yml:

kvm.yml
-------

Synopsis: Configure kvm.


Description of the task.


[`tasks/kvm.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/kvm.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/kvm.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_latex.yml:

latex.yml
---------

Synopsis: Configure latex.


Description of the task.


[`tasks/latex.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/latex.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/latex.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_libvirt.yml:

libvirt.yml
-----------

Synopsis: Configure libvirt.


Description of the task.


[`tasks/libvirt.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/libvirt.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/libvirt.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_lid.yml:

lid.yml
-------

Synopsis: Configure lid.


Description of the task.


[`tasks/lid.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/lid.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/lid.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:

.. seealso::
   * Handler :ref:`as_handler_messages.yml`




.. _as_logrotate.yml:

logrotate.yml
-------------

Synopsis: Configure logrotate.


Description of the task.


[`tasks/logrotate.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/logrotate.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/logrotate.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_modemmanager.yml:

modemmanager.yml
----------------

Synopsis: Configure modemmanager.


Description of the task.


[`tasks/modemmanager.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/modemmanager.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/modemmanager.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_modules.yml:

modules.yml
-----------

Synopsis: Configure modules.


Description of the task.


[`tasks/modules.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/modules.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/modules.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_netplan.yml:

netplan.yml
-----------

Synopsis: Configure netplan.


Description of the task.


[`tasks/netplan.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/netplan.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/netplan.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:

.. seealso::
   * Handler :ref:`as_handler_netplan.yml`
   * Template :ref:`as_template_netplan_default.j2`
   * Template :ref:`as_template_netplan_conf.j2`




.. _as_networkd.yml:

networkd.yml
------------

Synopsis: Configure networkd.


Description of the task.


[`tasks/networkd.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/networkd.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/networkd.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_networkmanager.yml:

networkmanager.yml
------------------

Synopsis: Configure networkmanager.


Description of the task.


[`tasks/networkmanager.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/networkmanager.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/networkmanager.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_nfsd.yml:

nfsd.yml
--------

Synopsis: Configure nfsd.


Description of the task.


[`tasks/nfsd.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/nfsd.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/nfsd.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_packages.yml:

packages.yml
------------

Synopsis: Manage packages.


Dynamic variables (4)
^^^^^^^^^^^^^^^^^^^^^

TBD

Debug (13)
^^^^^^^^^^

TBD

Install packages automatically (41)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

If enabled (52) and not empty (53) import ``install_package.yml``
(44) from the role ``vbotka.linux_lib`` (43). Flatten and filter
*unique* items in the lists ``my_packages_auto`` (46). Set it to the
mandatory variable ``ll_ipkg_list``. Optionally, set other variables
(47-50).

Install packages (56)
^^^^^^^^^^^^^^^^^^^^^

If not empty (66) TBD

Remove packages (69)
^^^^^^^^^^^^^^^^^^^^

TBD


[`tasks/packages.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/packages.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/packages.yml
    :language: Yaml
    :emphasize-lines: 2,4,13,41,56,69
    :linenos:





.. _as_passwords.yml:

passwords.yml
-------------

Synopsis: Configure passwords.


Description of the task.


[`tasks/passwords.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/passwords.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/passwords.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_pm_utils.yml:

pm_utils.yml
------------

Synopsis: Configure pm_utils.


Description of the task.


[`tasks/pm_utils.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/pm_utils.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/pm_utils.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_postfix.yml:

postfix.yml
-----------

Synopsis: Configure postfix.


Description of the task.


[`tasks/postfix.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/postfix.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/postfix.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_rc_local.yml:

rc_local.yml
------------

Synopsis: Configure rc_local.


Description of the task.


[`tasks/rc_local.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/rc_local.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/rc_local.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_reboot.yml:

reboot.yml
----------

Synopsis: Configure reboot.


Description of the task.


[`tasks/reboot.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/reboot.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/reboot.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_repos.yml:

repos.yml
---------

Synopsis: Configure repos.


Description of the task.


[`tasks/repos.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/repos.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/repos.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_resolvconf.yml:

resolvconf.yml
--------------

Synopsis: Configure resolvconf.


Description of the task.


[`tasks/resolvconf.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/resolvconf.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/resolvconf.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_service.yml:

service.yml
-----------

Synopsis: Manage services.


Debug (4)
^^^^^^^^^

TBD

Sanity (23)
^^^^^^^^^^^

TBD

Automatic management of listed services (74)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

When not empty (75) iterate ``my_services_varnames`` (97) (See default s/main/service.yml). Skip
when ``run_task`` (80) is not *True*.

Manual management of listed services (104)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

When not empty (105) iterate ``lp_service`` in the included tasks (115). When *auto* (110) set the
module (112) to ``ansible_service_mgr`` (OS native service manager found by the *setup*). TBC

Flush handlers (117)
^^^^^^^^^^^^^^^^^^^^

Automatic management of listed services notifies ``ansible_service_mgr``. See the tasks
service-\*.yml how manual management options notify handlers.


[`tasks/service.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/service.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/service.yml
    :language: Yaml
    :emphasize-lines: 2,4,23,74,104,117
    :linenos:





.. _as_service-service.yml:

service-service.yml
-------------------

Synopsis: Configure service-service.


Description of the task.


[`tasks/fn/service-service.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/fn/service-service.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/fn/service-service.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_service-systemd.yml:

service-systemd.yml
-------------------

Synopsis: Configure service-systemd.


Description of the task.


[`tasks/fn/service-systemd.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/fn/service-systemd.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/fn/service-systemd.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_service-sysvinit.yml:

service-sysvinit.yml
--------------------

Synopsis: Configure service-sysvinit.


Description of the task.


[`tasks/fn/service-sysvinit.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/fn/service-sysvinit.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/fn/service-sysvinit.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_service-debug.yml:

service-debug.yml
-----------------

Synopsis: Configure service-debug.


Description of the task.


[`tasks/fn/service-debug.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/fn/service-debug.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/fn/service-debug.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_smart.yml:

smart.yml
---------

Synopsis: Configure smart.


Description of the task.


[`tasks/smart.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/smart.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/smart.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_snap.yml:

snap.yml
--------

Synopsis: Configure snap.


Description of the task.


[`tasks/snap.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/snap.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/snap.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_speechd.yml:

speechd.yml
-----------

Synopsis: Configure speechd.


Description of the task.


[`tasks/speechd.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/speechd.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/speechd.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_sshd.yml:

sshd.yml
--------

Synopsis: Configure sshd.


Description of the task.


[`tasks/sshd.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/sshd.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/sshd.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_ssh.yml:

ssh.yml
-------

Synopsis: Configure ssh.


Description of the task.


[`tasks/ssh.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/ssh.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/ssh.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_sudoers.yml:

sudoers.yml
-----------

Synopsis: Configure sudoers.


Description of the task.


[`tasks/sudoers.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/sudoers.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/sudoers.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_swap.yml:

swap.yml
--------

Synopsis: Configure swap.


Description of the task.


[`tasks/swap.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/swap.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/swap.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_sysctl.yml:

sysctl.yml
----------

Synopsis: Configure sysctl.


Description of the task.


[`tasks/sysctl.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/sysctl.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/sysctl.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_systemd.yml:

systemd.yml
-----------

Synopsis: Configure systemd.


Set my_services (4)
^^^^^^^^^^^^^^^^^^^^

Iterate ``lp_systemd_unit`` (24) and create dictionary
``my_services``. It will be used by handlers to decide if and how to
reload or restart services

.. code-block:: yaml

   my_services:
     <name>.<type | d(lp_systemd_unit_type)>:
       state: <control.state | d('started')>
       restart_or_reload: <control.restart_or_reload | d('reload')>
   ...

Debug (28)
^^^^^^^^^^

To see the values of the variables run the playbook with options
``-t lp_systemd_debug -e lp_systemd_debug=True`` (29).

Packages (54)
^^^^^^^^^^^^^
Install packages when enabled (55).

Configure systemd (67)
^^^^^^^^^^^^^^^^^^^^^^

Use ``community.general.ini_file`` (72) to configure files in loop
(83). Register ``lp_systemd_conf_changes`` (82) and notify handler
``reload systemd conf`` (72).

.. code-block:: yaml

   lp_systemd_conf:
     <path>:
       owner: <owner | d(lp_systemd_owner)>
       group: <group | d(lp_systemd_group)>
       mode: <mode | d(lp_systemd_mode)>
       reload_service: <service to be reloaded or restarted by handler>
       conf:
         - {section: <section>, key: <option>, val: <value>}
     ...

Create units (105)
^^^^^^^^^^^^^^^^^^

Use `` ansible.builtin.template`` (112) to create units in the loop
(120) when ``state == 'create'`` (110). Register
``lp_systemd_unit_create_changes`` (119) and notify handler ``reload
systemd units`` (111).

.. code-block:: yaml

   lp_systemd_unit:
     - name: <name of the service>
       type: <type of the service | d(lp_systemd_unit_type)>
       path: <directory of the units | d(lp_systemd_unit_dir)>
       owner: <owner | d(lp_systemd_owner)>
       group: <group | d(lp_systemd_group)>
       mode: <mode | d(lp_systemd_mode)>
       state: <'create' or 'absent' | d('noop')>
     ...

Remove units (129)
^^^^^^^^^^^^^^^^^^

<TBD>

Control units (148)
^^^^^^^^^^^^^^^^^^^

.. code-block:: yaml

   lp_systemd_unit:
     - name: <name of the service>
       type: <type of the service | d(lp_systemd_unit_type)>
       control:
         daemon_reexec: <daemon_reexec | d(omit)>
         daemon_reload: <daemon_reload | d(omit)>
         enabled: <enabled | d(systemd_units_enabled)>
         force: <force | d(omit)>
         masked: <masked | d(omit)>
         no_block: <no_block | d(omit)>
         scope: <scope | d(omit)>
         state: <state | d(omit)>


.. seealso::

   * Description of Parameters `Ansible module systemd
     <https://docs.ansible.com/ansible/latest/modules/systemd_module.html#systemd-manage-services>`_

<TBD>


[`tasks/systemd.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/systemd.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/systemd.yml
    :language: Yaml
    :emphasize-lines: 2,4,28,54,67,105,129,148
    :linenos:





.. _as_timesyncd.yml:

timesyncd.yml
-------------

Synopsis: Configure timesyncd.


Description of the task.


[`tasks/timesyncd.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/timesyncd.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/timesyncd.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_timezone.yml:

timezone.yml
------------

Synopsis: Configure timezone.


Description of the task.


[`tasks/timezone.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/timezone.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/timezone.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_tlp.yml:

tlp.yml
-------

Synopsis: Configure tlp.


Description of the task.


[`tasks/tlp.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/tlp.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/tlp.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_udev.yml:

udev.yml
--------

Synopsis: Configure udev.


Description of the task.


[`tasks/udev.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/udev.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/udev.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_ufw.yml:

ufw.yml
-------

Synopsis: Configure ufw.


Description of the task.


[`tasks/ufw.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/ufw.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/ufw.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_users.yml:

users.yml
---------

Synopsis: Configure users.


Description of the task.


[`tasks/users.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/users.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/users.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_vars_firstfound.yml:

vars_firstfound.yml
-------------------

Synopsis: Configure vars_firstfound.


Description of the task.


[`tasks/vars_firstfound.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/vars_firstfound.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/vars_firstfound.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_vars_incremental.yml:

vars_incremental.yml
--------------------

Synopsis: Configure vars_incremental.


Description of the task.


[`tasks/vars_incremental.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/vars_incremental.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/vars_incremental.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_vars.yml:

vars.yml
--------

Synopsis: Configure vars.


Description of the task.


[`tasks/vars.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/vars.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/vars.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_virtualbox.yml:

virtualbox.yml
--------------

Synopsis: Configure virtualbox.


Description of the task.


[`tasks/virtualbox.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/virtualbox.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/virtualbox.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_wpagui.yml:

wpagui.yml
----------

Synopsis: Configure wpagui.


Description of the task.


[`tasks/wpagui.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/wpagui.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/wpagui.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_wpasupplicant.yml:

wpasupplicant.yml
-----------------

Synopsis: Configure wpasupplicant.


Description of the task.


[`tasks/wpasupplicant.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/wpasupplicant.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/wpasupplicant.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_xen.yml:

xen.yml
-------

Synopsis: Configure xen.


Description of the task.


[`tasks/xen.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/xen.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/xen.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_xorg.yml:

xorg.yml
--------

Synopsis: Configure xorg.


Description of the task.


[`tasks/xorg.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/xorg.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/xorg.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_zeitgeist.yml:

zeitgeist.yml
-------------

Synopsis: Configure zeitgeist.


Description of the task.


[`tasks/zeitgeist.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/zeitgeist.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/zeitgeist.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_zfs.yml:

zfs.yml
-------

Synopsis: Configure zfs.


Description of the task.


[`tasks/zfs.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/zfs.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/zfs.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_vars_flavors.yml:

vars_flavors.yml
----------------

Synopsis: Configure vars_flavors.


Description of the task.


[`tasks/sub/vars_flavors.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/sub/vars_flavors.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/sub/vars_flavors.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





.. _as_vars_flavors_common.yml:

vars_flavors_common.yml
-----------------------

Synopsis: Configure vars_flavors_common.


Description of the task.


[`tasks/sub/vars_flavors_common.yml <https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/sub/vars_flavors_common.yml>`_]

.. highlight:: yaml
    :linenothreshold: 5
.. literalinclude:: ../../tasks/sub/vars_flavors_common.yml
    :language: Yaml
    :emphasize-lines: 1,2
    :linenos:





