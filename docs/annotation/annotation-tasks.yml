---
mytasks:
  - file: main.yml
    link: main.yml
    path: tasks/main.yml
    synopsis: |
      Main task.
    description: |
      Import tasks if enabled.
    lines: 1,2
    seealso: []
    note: []
    warning: []

  - file: acpi.yml
    link: acpi.yml
    path: tasks/acpi.yml
    synopsis: |
      Configure acpi.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: aliases.yml
    link: aliases.yml
    path: tasks/aliases.yml
    synopsis: |
      Configure aliases.
    description: |
      Description of the task.
    lines: 1,2
    seealso: {'handlers': ['newaliases'], 'templates': ['aliases']}
    notes: []
    hints: []
    warnings: []

  - file: apt.yml
    link: apt.yml
    path: tasks/apt.yml
    synopsis: |
      Configure apt.
    description: |
      Description of the task.
    lines: 1,2
    seealso: {'templates': ['apt_confd']}
    notes: []
    hints: []
    warnings: []

  - file: apparmor.yml
    link: apparmor.yml
    path: tasks/apparmor.yml
    synopsis: |
      Configure apparmor.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: authorized_keys.yml
    link: authorized_keys.yml
    path: tasks/authorized_keys.yml
    synopsis: |
      Configure authorized_keys.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: autofs.yml
    link: autofs.yml
    path: tasks/autofs.yml
    synopsis: |
      Configure autofs.
    description: |
      Description of the task.
    lines: 1,2
    seealso: {'handlers': ['autofs']}
    notes: []
    hints: []
    warnings: []

  - file: auto_upgrades.yml
    link: auto_upgrades.yml
    path: tasks/auto_upgrades.yml
    synopsis: |
      Configure auto_upgrades.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: bluetooth.yml
    link: bluetooth.yml
    path: tasks/bluetooth.yml
    synopsis: |
      Configure bluetooth.
    description: |
      Description of the task.
    lines: 1,2
    seealso: {'handlers': ['bluetooth']}
    notes: []
    hints: []
    warnings: []

  - file: chrony.yml
    link: chrony.yml
    path: tasks/chrony.yml
    synopsis: |
      Configure chrony.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: cron.yml
    link: cron.yml
    path: tasks/cron.yml
    synopsis: |
      Configure cron.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: debsums.yml
    link: debsums.yml
    path: tasks/debsums.yml
    synopsis: |
      Configure debsums.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: debug.yml
    link: debug.yml
    path: tasks/debug.yml
    synopsis: |
      Configure debug.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: dnsmasq.yml
    link: dnsmasq.yml
    path: tasks/dnsmasq.yml
    synopsis: |
      Configure dnsmasq.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: fstab.yml
    link: fstab.yml
    path: tasks/fstab.yml
    synopsis: |
      Configure fstab.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: gpg.yml
    link: gpg.yml
    path: tasks/gpg.yml
    synopsis: |
      Configure gpg.
    description: |
      Description of the task.
    lines: 1,2
    seealso: {'handlers': ['gpg'], 'templates': ['gpg.conf', 'gpg_agent.conf', 'gpg_dirmngr.conf']}
    notes: []
    hints: []
    warnings: []

  - file: gpsd.yml
    link: gpsd.yml
    path: tasks/gpsd.yml
    synopsis: |
      Configure gpsd.
    description: |
      Description of the task.
    lines: 1,2
    seealso: {'handlers': ['gpsd', 'bluetooth'], 'templates': ['gpsd']}
    notes: []
    hints: []
    warnings: []

  - file: grub.yml
    link: grub.yml
    path: tasks/grub.yml
    synopsis: |
      Configure grub.
    description: |
      Description of the task.
    lines: 1,2
    seealso: {'handlers': ['grub']}
    notes: []
    hints: []
    warnings: []

  - file: hostname.yml
    link: hostname.yml
    path: tasks/hostname.yml
    synopsis: |
      Configure hostname.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: hosts.yml
    link: hosts.yml
    path: tasks/hosts.yml
    synopsis: |
      Configure hosts.
    description: |
      Description of the task.
    lines: 1,2
    seealso: {'templates': ['hosts']}
    notes: []
    hints: []
    warnings: []

  - file: iptables.yml
    link: iptables.yml
    path: tasks/iptables.yml
    synopsis: |
      Configure iptables.
    description: |
      Description of the task.
    lines: 1,2
    seealso: {'handlers': ['iptables'], 'templates': ['iptables_restore', 'default_iptables', 'router1_iptables']}
    notes: []
    hints: []
    warnings: []

  - file: kvm.yml
    link: kvm.yml
    path: tasks/kvm.yml
    synopsis: |
      Configure kvm.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: latex.yml
    link: latex.yml
    path: tasks/latex.yml
    synopsis: |
      Configure latex.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: libvirt.yml
    link: libvirt.yml
    path: tasks/libvirt.yml
    synopsis: |
      Configure libvirt.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: lid.yml
    link: lid.yml
    path: tasks/lid.yml
    synopsis: |
      Configure lid.
    description: |
      Description of the task.
    lines: 1,2
    seealso: {'handlers': ['messages']}
    notes: []
    hints: []
    warnings: []

  - file: logrotate.yml
    link: logrotate.yml
    path: tasks/logrotate.yml
    synopsis: |
      Configure logrotate.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: modemmanager.yml
    link: modemmanager.yml
    path: tasks/modemmanager.yml
    synopsis: |
      Configure modemmanager.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: modules.yml
    link: modules.yml
    path: tasks/modules.yml
    synopsis: |
      Configure modules.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: netplan.yml
    link: netplan.yml
    path: tasks/netplan.yml
    synopsis: |
      Configure netplan.
    description: |
      Description of the task.
    lines: 1,2
    seealso: {'handlers': ['netplan'], 'templates': ['netplan_default', 'netplan_conf']}
    notes: []
    hints: []
    warnings: []

  - file: networkd.yml
    link: networkd.yml
    path: tasks/networkd.yml
    synopsis: |
      Configure networkd.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: networkmanager.yml
    link: networkmanager.yml
    path: tasks/networkmanager.yml
    synopsis: |
      Configure networkmanager.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: nfsd.yml
    link: nfsd.yml
    path: tasks/nfsd.yml
    synopsis: |
      Configure nfsd.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: packages_auto.yml
    link: packages_auto.yml
    path: tasks/packages_auto.yml
    synopsis: |
      Configure packages_auto.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: packages.yml
    link: packages.yml
    path: tasks/packages.yml
    synopsis: |
      Configure packages.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: passwords.yml
    link: passwords.yml
    path: tasks/passwords.yml
    synopsis: |
      Configure passwords.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: pm_utils.yml
    link: pm_utils.yml
    path: tasks/pm_utils.yml
    synopsis: |
      Configure pm_utils.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: postfix.yml
    link: postfix.yml
    path: tasks/postfix.yml
    synopsis: |
      Configure postfix.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: rc_local.yml
    link: rc_local.yml
    path: tasks/rc_local.yml
    synopsis: |
      Configure rc_local.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: reboot.yml
    link: reboot.yml
    path: tasks/reboot.yml
    synopsis: |
      Configure reboot.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: repos.yml
    link: repos.yml
    path: tasks/repos.yml
    synopsis: |
      Configure repos.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: resolvconf.yml
    link: resolvconf.yml
    path: tasks/resolvconf.yml
    synopsis: |
      Configure resolvconf.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: service.yml
    link: service.yml
    path: tasks/service.yml
    synopsis: |
      Configure services.

    description: |
      Set my_service_name_vars (10)
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      The task will iterate the list ``lp_service_enable`` (14) and
      look for variables ``lp_<item>`` (13). If the variable exists and
      is ``True`` *(default='false')* an item will be added to the
      list ``my_service_name_vars`` (12). The item is a *{key: value}*
      hash where the *key* is the name of the service in this role and
      the *value* is the OS specific name of the service stored in the
      variable ``lp_<item>_service`` (13). The best practice is to
      configure variables ``lp_<item>_service`` in files placed in the
      directory ``vars/defaults``.

      Set my_service_enable_vars (18)
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      The next task will iterate the same list ``lp_service_enable``
      (22) and condition (23). The created list
      ``my_service_enable_vars`` (20) will keep the *{key: value}* hashes
      with the *value* of the variable ``lp_<item>_enable`` (21).

      Get service_facts and create dict my_services (26)
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      Run module ``service_facts`` (29) and combine dictionary
      ``my_services`` (32). This dictionary will be used to test a
      service is available when ``lp_service_sanity`` is enabled
      *(default: True)*.

      Debug (44)
      ^^^^^^^^^^
      To see what services (49,51,53,55,57) will be managed run the
      playbook with options ``-t lp_service_debug -e
      "lp_service_debug=True"``.

      Debug sanity lp_service_enable (65)
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      To see what services (68,70) will be tested when
      ``lp_service_sanity`` is enabled (72) run playbook with options
      ``-t lp_service_debug,lp_service_sanity -e
      "lp_service_debug=True"``.

      Sanity lp_service_enable (76)
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      If ``lp_service_sanity`` is enabled (81) test if all services in
      the list ``my_service_name_vars`` are available in the list of
      installed services ``my_services`` (84). Fail (82) when there
      are undefined services.

      Manage services listed in lp_service_enable (91)
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      To configure the services listed in the variable
      *lp_service_enable* run the playbook with the tag ``-t
      lp_service_auto`` (97).

      Manage services listed in lp_service (99)
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      To configure the services listed in the variable *lp_service*
      run the playbook with the tag ``-t lp_service_general`` (111).

    lines: 10,12-14,18,20-23,26,29,32,44,49,51,53,55,57,65,68,70,72,76,81,82,84,91,97,99,111
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: smart.yml
    link: smart.yml
    path: tasks/smart.yml
    synopsis: |
      Configure smart.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: snap.yml
    link: snap.yml
    path: tasks/snap.yml
    synopsis: |
      Configure snap.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: speechd.yml
    link: speechd.yml
    path: tasks/speechd.yml
    synopsis: |
      Configure speechd.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: sshd.yml
    link: sshd.yml
    path: tasks/sshd.yml
    synopsis: |
      Configure sshd.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: ssh.yml
    link: ssh.yml
    path: tasks/ssh.yml
    synopsis: |
      Configure ssh.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: sudoers.yml
    link: sudoers.yml
    path: tasks/sudoers.yml
    synopsis: |
      Configure sudoers.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: swap.yml
    link: swap.yml
    path: tasks/swap.yml
    synopsis: |
      Configure swap.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: sysctl.yml
    link: sysctl.yml
    path: tasks/sysctl.yml
    synopsis: |
      Configure sysctl.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: systemd.yml
    link: systemd.yml
    path: tasks/systemd.yml
    synopsis: |
      Configure systemd.

    description: |
      Set my_services (13)
      ^^^^^^^^^^^^^^^^^^^^
      Iterate ``lp_systemd_unit`` (18) and create dictionary
      ``my_services``. It will be used by handlers to decide if and
      how to reload or restart services

      .. code-block:: yaml

         my_services:
           <name>.<type|default(lp_systemd_unit_type)>:
             state: <control.state|default('started')>
             restart_or_reload: <control.restart_or_reload|default('reload')>
         ...

      Debug (31)
      ^^^^^^^^^^
      To see the values of the variables run the playbook with
      options ``-t lp_systemd_debug -e lp_systemd_debug=True`` (54).

      Packages (58)
      ^^^^^^^^^^^^^
      Install packages when enabled (64).

      Configure systemd (68)
      ^^^^^^^^^^^^^^^^^^^^^^

      Use ``community.general.ini_file`` (69) to configure files (70) in loop
      ``with_subelements`` (80-82). Register
      ``lp_systemd_conf_changes`` (79) and notify handler ``reload
      systemd conf`` (85).

      .. code-block:: yaml

         lp_systemd_conf:
           <path>:
             owner: <owner|default(lp_systemd_owner)>
             group: <group|default(lp_systemd_group)>
             mode: <mode|default(lp_systemd_mode)>
             reload_service: <service to be reloaded or restarted by handler>
             conf:
               - {section: <section>, key: <option>, val: <value>}
           ...

      Create units (110)
      ^^^^^^^^^^^^^^^^^^

      Use `` ansible.builtin.template`` (111) to create units in the loop
      (119) when ``state == 'create'`` (123). Register
      ``lp_systemd_unit_create_changes`` (118) and notify handler ``reload
      systemd units`` (122).

      .. code-block:: yaml

         lp_systemd_unit:
           - name: <name of the service>
             type: <type of the service|default(lp_systemd_unit_type)>
             path: <directory of the units|default(lp_systemd_unit_dir)>
             owner: <owner|default(lp_systemd_owner)>
             group: <group|default(lp_systemd_group)>
             mode: <mode|default(lp_systemd_mode)>
             state: <'create' or 'absent'|default('noop')>
           ...

      Remove units (132)
      ^^^^^^^^^^^^^^^^^^

      <TBD>

      Control units (149)
      ^^^^^^^^^^^^^^^^^^^

      .. code-block:: yaml

         lp_systemd_unit:
           - name: <name of the service>
             type: <type of the service|default(lp_systemd_unit_type)>
             control:
               daemon_reexec: <daemon_reexec|default(omit)>
               daemon_reload: <daemon_reload|default(omit)>
               enabled: <enabled|default(systemd_units_enabled)>
               force: <force|default(omit)>
               masked: <masked|default(omit)>
               no_block: <no_block|default(omit)>
               scope: <scope|default(omit)>
               state: <state|default(omit)>


      .. seealso::

         * Description of Parameters `Ansible module systemd
           <https://docs.ansible.com/ansible/latest/modules/systemd_module.html#systemd-manage-services>`_

      <TBD>

    lines: 1,2,13,18,31,54,58,64,64,68,70,80-82,79,85,110,111,118,119,122,123,132,149
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: timesyncd.yml
    link: timesyncd.yml
    path: tasks/timesyncd.yml
    synopsis: |
      Configure timesyncd.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: timezone.yml
    link: timezone.yml
    path: tasks/timezone.yml
    synopsis: |
      Configure timezone.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: tlp.yml
    link: tlp.yml
    path: tasks/tlp.yml
    synopsis: |
      Configure tlp.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: udev.yml
    link: udev.yml
    path: tasks/udev.yml
    synopsis: |
      Configure udev.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: ufw.yml
    link: ufw.yml
    path: tasks/ufw.yml
    synopsis: |
      Configure ufw.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: users.yml
    link: users.yml
    path: tasks/users.yml
    synopsis: |
      Configure users.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: vars_firstfound.yml
    link: vars_firstfound.yml
    path: tasks/vars_firstfound.yml
    synopsis: |
      Configure vars_firstfound.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: vars_incremental.yml
    link: vars_incremental.yml
    path: tasks/vars_incremental.yml
    synopsis: |
      Configure vars_incremental.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: vars.yml
    link: vars.yml
    path: tasks/vars.yml
    synopsis: |
      Configure vars.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: virtualbox.yml
    link: virtualbox.yml
    path: tasks/virtualbox.yml
    synopsis: |
      Configure virtualbox.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: wpagui.yml
    link: wpagui.yml
    path: tasks/wpagui.yml
    synopsis: |
      Configure wpagui.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: wpasupplicant.yml
    link: wpasupplicant.yml
    path: tasks/wpasupplicant.yml
    synopsis: |
      Configure wpasupplicant.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: xen.yml
    link: xen.yml
    path: tasks/xen.yml
    synopsis: |
      Configure xen.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: xorg.yml
    link: xorg.yml
    path: tasks/xorg.yml
    synopsis: |
      Configure xorg.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: zeitgeist.yml
    link: zeitgeist.yml
    path: tasks/zeitgeist.yml
    synopsis: |
      Configure zeitgeist.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: zfs.yml
    link: zfs.yml
    path: tasks/zfs.yml
    synopsis: |
      Configure zfs.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: vars_flavors.yml
    link: vars_flavors.yml
    path: tasks/sub/vars_flavors.yml
    synopsis: |
      Configure vars_flavors.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

  - file: vars_flavors_common.yml
    link: vars_flavors_common.yml
    path: tasks/sub/vars_flavors_common.yml
    synopsis: |
      Configure vars_flavors_common.
    description: |
      Description of the task.
    lines: 1,2
    seealso: []
    notes: []
    hints: []
    warnings: []

...
